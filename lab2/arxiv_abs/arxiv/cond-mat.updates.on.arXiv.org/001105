The wave-function-matching (WFM) technique for first-principles transport-property calculations
was modified by S\o{}rensen {\it et al.} so as to exclude rapidly decreasing evanescent waves [S\o{}rensen
{\it et al.}, Phys. Rev. B {\bf 77}, 155301 (2008)]. However, this method lacks translational invariance
of the transmission probability with respect to insertion of matching planes and consistency between
the sum of the transmission and reflection probabilities and the number of channels in the transition
region. We reformulate the WFM method since the original methods are formulated to include all the
generalized Bloch waves. It is found that the translational invariance is destroyed by the overlap
of the layers between the electrode and transition regions and by the pseudoinverses used to exclude
the rapidly decreasing evanescent waves. We then devise a method that removes the overlap and calculates
the transmission probability without the pseudoinverses. As a result, we find that the translational
invariance of the transmission probability with respect to insertion of the extra layers is properly
retained and the sum of the transmission and reflection probabilities exactly agrees with the number
of channels. In addition, we prove that the accuracy in the transmission probability of this WFM
technique is comparable with that obtained by the nonequilibrium Green's function method. Furthermore,
we carry out the electron transport calculations on two-dimensional graphene sheets embedded
with B--N line defects sandwiched between a pair of semi-infinite graphene electrodes and find
the dependence of the electron transmission on the transverse momentum perpendicular to the direction
of transport. 
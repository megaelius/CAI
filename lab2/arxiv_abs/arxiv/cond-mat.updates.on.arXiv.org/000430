We have performed a microscopic study of a straight quantized vortex line in three dimensions in
condensed $^4$He at zero temperature using the Shadow Path Integral Ground State method and the
fixed-phase approximation. We have characterized the energy and the local density profile around
the vortex axis in superfluid $^4$He at several densities, ranging from below the equilibrium density
up to the overpressurized regime. For the Onsager-Feynman (OF) phase our results are exact and represent
a benchmark for other theories. The inclusion of backflow correlations in the phase improves the
description of the vortex with respect to the OF phase by a large reduction of the core energy of the
topological excitation. At all densities the phase with backflow induces a partial filling of the
vortex core and this filling slightly increases with density. The core size slightly decreases
for increasing density and the density profile has well defined density dependent oscillations
whose wave vector is closer to the wave vector of the main peak in the static density response function
rather than to the roton wave vector. Our results can be applied to vortex rings of large radius $R$
and we find good agreement with the experimental value of the energy as function of $R$ without any
free parameter. We have studied also $^4$He above the melting density in the solid phase using the
same functional form for the phase as in the liquid. We found that off-diagonal properties of the
solid are not qualitatively affected by the velocity field induced by the vortex phase, both with
and without backflow correlations. Therefore we find evidence that a perfect $^4$He crystal is
not a marginally stable quantum solid in which rotation would be able to induce off-diagonal long-range
coherence. 
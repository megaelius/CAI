A system with charge conservation and lattice translation symmetry has a well-defined filling
$\nu$, which is a real number representing the average charge per unit cell. We show that if $\nu$
is fractional (i.e. not an integer), this imposes very strong constraints on the low-energy theory
of the system and give a framework to understand such constraints in great generality, vastly generalizing
the Luttinger and Lieb-Schultz-Mattis theorems. The most powerful constraint comes about if $\nu$
is continuously tunable (i.e. the system is charge-compressible), in which case we show that the
low-energy theory must have a very large emergent symmetry group -- larger than any compact Lie group.
An example is the Fermi surface of a Fermi liquid, where the charge at every point on the Fermi surface
is conserved. We expect that in many, if not all, cases, even exotic non-Fermi liquids will have the
same emergent symmetry group as a Fermi liquid, even though they could have very different dynamics.
We call a system with this property an "ersatz Fermi liquid". We show that ersatz Fermi liquids share
a number of properties in common with Fermi liquids, including Luttinger's theorem (which is thus
extended to a large class of non-Fermi liquids) and periodic "quantum oscillations" in the response
to an applied magnetic field. We also establish versions of Luttinger's theorem for the composite
Fermi liquid in quantum Hall systems and for spinon Fermi surfaces in Mott insulators. Our work makes
connection between filling constraints and the theory of symmetry-protected topological (SPT)
phases, in particular through the concept of " 't Hooft anomalies". 
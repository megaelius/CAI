Two of the most influential ideas developed by Richard Feynman are the Feynman diagram technique
and his variational approach. The former provides a powerful tool to construct a systematic expansion
for a generic interacting system, while the latter allows optimization of a perturbation theory
using a variational principle. Here we show that combining a variational approach with a new diagrammatic
quantum Monte Carlo method, both based on the Feynman's original ideas, results in a powerful and
accurate solver to the generic solid state problem, in which a macroscopic number of electrons interact
by the long range Coulomb repulsion. We apply the solver to the quintessential problem of solid state,
the uniform electron gas (UEG), which is at the heart of the density functional theory (DFT) success
in describing real materials, yet it has not been adequately solved for over 90 years. While some
wave-function properties, like the ground state energy, have been very accurately calculated
by the diffusion Monte Carlo method (DMC), the static and dynamic response functions, which are
directly accessed by the experiment, and are crucial for development of non-local and non-adiabatic
density functionals, remain poorly understood. Our method allows us to calculate the momentum-frequency
resolved spin response functions for the first time, and to improve on the precision of the charge
response function. The accuracy of both response functions is sufficiently high, so as to uncover
previously missed fine structure in these responses. This method can be straightforwardly applied
to a large number of moderately interacting electron systems in the thermodynamic limit, including
realistic models of metallic and semiconducting solids. 
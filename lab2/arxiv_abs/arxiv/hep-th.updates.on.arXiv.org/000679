We begin with an introduction to topological order using Wegner's quantum $Z_2$ gauge theory on
the square lattice: the topological state is characterized by the expulsion of defects, carrying
$Z_2$ magnetic flux. The interplay between topological order and the breaking of global symmetry
is described by the non-zero temperature statistical mechanics of classical XY models in dimension
$D=3$; such models also describe the zero temperature quantum phases of bosons with short-range
interactions on the square lattice at integer filling. The topological state is again characterized
by the expulsion of certain defects, in a state with fluctuating symmetry-breaking order, along
with the presence of emergent gauge fields. The phase diagrams of the $Z_2$ gauge theory and the XY
models are obtained by embedding them in U(1) gauge theories, and by studying their Higgs and confining
phases. These ideas are then applied to the single-band Hubbard model on the square lattice. A SU(2)
gauge theory describes the fluctuations of spin-density-wave order, and its phase diagram is presented
by analogy to the XY models. We obtain a class of zero temperature metallic states with fluctuating
spin-density wave order, topological order associated with defect expulsion, deconfined emergent
gauge fields, reconstructed Fermi surfaces (with `chargon' or electron-like quasiparticles),
but no broken symmetry. We conclude with the application of such metallic states to the pseudogap
phase of the cuprates, and note the recent comparison with numerical studies of the Hubbard model
and photoemission observations of the electron-doped cuprates. In a detour, we also discuss the
influence of Berry phases, and how they can lead to deconfined quantum critical points: this applies
to bosons on the square lattice at half-integer filling, and to quantum dimer models. 
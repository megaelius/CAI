We use cosmological hydrodynamical galaxy formation simulations from the NIHAO project to investigate
the impact of the threshold for star formation on the response of the dark matter (DM) halo to baryonic
processes. The fiducial NIHAO threshold, $n=10\, {\rm cm}^{-3}$, results in strong expansion
of the DM halo in galaxies with stellar masses in the range $10^{7.5} < M_{star} < 10^{9.5} M_{\odot}$.
We find that lower thresholds such as $n=0.1$ (as employed by the EAGLE/APOSTLE and Illustris/AURIGA
projects) do not result in significant halo expansion at any mass scale. Halo expansion driven by
supernova feedback requires significant fluctuations in the local gas fraction on sub-dynamical
times (i.e., < 50 Myr at galaxy half-light radii), which are themselves caused by variability in
the star formation rate. At one per cent of the virial radius, simulations with $n=10$ have gas fractions
of $\simeq 0.2$ and variations of $\simeq 0.1$, while $n=0.1$ simulations have order of magnitude
lower gas fractions and hence do not expand the halo. Star formation rates are more variable for higher
$n$, lower galaxy masses, and when star formation is measured on shorter time scales. Simulations
with $n=10$ have up to 0.4 dex higher scatter in specific star formation rates than simulations with
$n=0.1$. The observed DM circular velocities of nearby dwarf galaxies are inconsistent with CDM
simulations with $n=0.1$ and $n=1$, but in reasonable agreement with $n=10$. While the strong dependence
of the halo response to $n$ currently prevents a robust prediction for dark halo structure in CDM
cosmologies, it is reassuring that different $n$ result in testable predictions for the properties
of gas and star formation, and thus observationally constraining the sub-grid model for star formation,
and hence the nature of DM, should be possible in the near future. 
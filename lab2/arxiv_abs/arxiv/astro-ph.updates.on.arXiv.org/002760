It has been shown that fragmentation within self-gravitating, turbulent molecular clouds ("turbulent
fragmentation") can naturally explain the observed properties of protostellar cores, including
the core mass function (CMF). Here, we extend recently-developed analytic models for turbulent
fragmentation to follow the time-dependent hierarchical fragmentation of self-gravitating
cores, until they reach effectively infinite density (and form stars). We show that turbulent fragmentation
robustly predicts two key features of the IMF. First, a high-mass power-law scaling very close to
the Salpeter slope, which is a generic consequence of the scale-free nature of turbulence and self-gravity.
We predict the IMF slope (-2.3) is slightly steeper then the CMF slope (-2.1), owing to the slower
collapse and easier fragmentation of large cores. Second, a turnover mass, which is set by a combination
of the CMF turnover mass (a couple solar masses, determined by the `sonic scale' of galactic turbulence,
and so weakly dependent on galaxy properties), and the equation of state (EOS). A "soft" EOS with
polytropic index $\gamma<1.0$ predicts that the IMF slope becomes "shallow" below the sonic
scale, but fails to produce the full turnover observed. An EOS which becomes "stiff" at sufficiently
low surface densities $\Sigma_{\rm gas} \sim 5000\,M_{\odot}\,{\rm pc^{-2}}$, and/or models
where each collapsing core is able to heat and effectively stiffen the EOS of a modest mass ($\sim
0.02\,M_{\odot}$) of surrounding gas, are able to reproduce the observed turnover. Such features
are likely a consequence of more detailed chemistry and radiative feedback. 
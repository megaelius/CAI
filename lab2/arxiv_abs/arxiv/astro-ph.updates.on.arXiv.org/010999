Mixed-variable symplectic integrators are widely used in orbital dynamics. However, they have
been developed for Solar system-type architectures, and can not handle evolving hierarchy, in
particular in systems with two or more stellar components. Such configuration may have occurred
in the history of HD 106906, a tight pair of F-type stars surrounded by a debris disk and a planetary-mass
companion on a wide orbit. We present the new algorithm ODEA, based on the symplectic algorithm SWIFT
HJS, that can model any system (binary,...) with unstable architecture. We study the peculiar system
HD 106906 as a testcase for the code. We define and compute a criterion based on acceleration ratios
to indicate when the initial hierarchy is not relevant anymore. A new hierarchy is then computed.
The code is applied to study the two fly-bys that occurred on system HD 106906, recently evidenced
by De Rosa & Kalas (2019), to determine if they could account for the wide orbit of the planet. Thousands
of simulations have been performed to account for the uncertainty on the perturbers coordinates
and velocities. The algorithm is able to handle any change of hierarchy, temporary or not. We used
it to fully model HD 106906 encounters. The simulations confirm that the fly-bys could have stabilized
the planet orbit, and show that it can account for the planet probable misalignment with respect
to the disk plane as well as the disk morphology. However, that requires a small distance at closest
approach (< 0.05 pc), and this configuration is not guaranteed. ODEA is a very good choice for the
study of non-Solar type architecture. It can now adapt to an evolving hierarchy, and is thus suitable
to study capture of planets and dust. Further observations of the perturbers, in particular their
radial velocity, are required to conclude on the effects of the fly-by on system HD 106906. 
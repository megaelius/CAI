We perform a suite of simulations with realistic gravity and thermal balance in shells to quantify
the role of the ratio of cooling time to the free-fall time ($t_{\rm cool}/t_{\rm ff}$) and the amplitude
of density perturbations ($\delta \rho/\rho$) in the production of multiphase gas in the circumgalactic
medium (CGM). Previous idealized simulations, focussing on small amplitude perturbations in
the intracluster medium (ICM), found that cold gas condenses out of the hot ICM in global thermal
balance when the background $t_{\rm cool}/t_{\rm ff} \lesssim 10$. Sources such as galaxy wakes
and dense cosmological filaments can seed large density contrast in the medium and give rise to cold
gas in halos with $(t_{\rm cool}/t_{\rm ff}) > 10$, consistent with the recent observations. From
our simulations, we introduce a condensation curve in the $(\delta \rho/\rho)$ - min$(t_{\rm cool}/t_{\rm
ff})$ space, that defines the threshold for condensation of multiphase gas in the CGM. We show that
this condensation curve corresponds to ${(t_{\rm cool}/t_{\rm ff})}_{\rm blob} \lesssim 10$
applied to the overdense blob instead of the background for which $t_{\rm cool}/t_{\rm ff}$ can
be higher. We also study the modification of the condensation curve under different conditions
like entropy stratification, jet injection and the introduction of buoyantly rising bubbles.
Steeper (positive) entropy gradients and bubbles shift the condensation curve to higher amplitudes
of perturbations (i.e., make condensation difficult) while gentle outflows shift it to lower amplitudes
of perturbations, making condensation easier. A constant entropy core, applicable to the CGM in
smaller halos, shows condensation over a larger range of radii as compared to the steeper entropy
profiles in the ICM. 
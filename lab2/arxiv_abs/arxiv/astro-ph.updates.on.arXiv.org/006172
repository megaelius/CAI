Observations of soft X-ray transients in quiescence suggest the existence of heat sources in the
crust of accreting neutron stars. Heat is thought to be released by electroweak and nuclear processes
triggered by the burying of ashes of X-ray bursts. The heating is studied using a fully quantum approach
taking consistently into account nuclear shell effects. We have followed the evolution of ashes
made of $^{56}$Fe employing the nuclear energy-density functional theory. Both the outer and inner
crusts are described using the same functional, thus ensuring a unified and thermodynamically
consistent treatment. To assess the role of the neutron-matter constraint, we have employed the
set of accurately calibrated Brussels-Montreal functionals BSk19, BSk20, and BSk21 and for comparison
the SLy4 functional. Due to nuclear shell effects, the fully accreted crust is found to be much less
stratified than in previous studies. In particular, large regions of the inner crust contain clusters
with the magic number $Z=14$. The heat deposited in the outer crust is tightly constrained by experimental
atomic mass data. The shallow heating we obtain does not exceed $0.2$~MeV and is therefore not enough
to explain the cooling of some soft X-ray transients. The total heat released in the crust is very
sensitive to details of the nuclear structure and is predicted to lie in the range from $1.5$~MeV
to $1.7$~MeV. The evolution of an accreted matter element and therefore the location of heat sources
are governed to a large extent by the existence of nuclear shell closures. Ignoring these effects
in the inner crust, the total heat falls to $\sim 0.6$~MeV. The neutron-matter constraint is also
found to play a key role. The large amount of heat obtained by Steiner et al. (2012) could thus be traced
back to unrealistic neutron-matter equations of state. 
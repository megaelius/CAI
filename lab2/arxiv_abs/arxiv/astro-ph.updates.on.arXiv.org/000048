Using Eggleton's stellar evolution code, we study the minimum mass ratio ($q_{\rm min}$) of W Ursae
Majoris (W UMa) binaries that have different primary masses. It is found that the minimum mass ratio
of W UMa binaries decreases with increasing mass of the primary if the primary's mass is less than
about 1.3$M_{\rm \odot}$, and above this mass the ratio is roughly constant. By comparing the theoretical
minimum mass ratio with the observational data, it is found that the existence of low-$q$ systems
can be explained by the different structure of the primaries with different masses. This suggests
that the dimensionless gyration radius ($k_1^2$) and thus the structure of the primary is very important
in determining the minimum mass ratio. In addition, we investigate the mass loss during the merging
process of W UMa systems and calculate the rotation velocities of the single stars formed by the merger
of W UMa binaries due to tidal instability. It is found that in the case of the conservation of mass
and angular momentum, the merged single stars rotate with a equatorial velocity of about $588\sim819$
km s$^{-1}$, which is much larger than their break-up velocities ($v_{\rm b}$). This suggests that
the merged stars should extend to a very large radius (3.7$\sim$5.3 times the radii of the primaries)
or W UMa systems would lose a large amount of mass (21$\sim$33 per cent of the total mass) during the
merging process. If the effect of magnetic braking is considered, the mass loss decreases to be 12$\sim$18
per cent of their total masses. This implies that the significant angular momentum and mass might
be lost from W UMa systems in the course of the merging process, and this kind of mass and angular momentum
loss might be driven by the release of orbital energy of the secondaries, which is similar to common-envelope
evolution. 
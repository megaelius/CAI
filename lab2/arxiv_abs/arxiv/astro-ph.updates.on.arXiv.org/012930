We present a new modeling of the X-ray luminosity function (XLF) of Active Galactic Nuclei (AGN)
out to z$\sim$3, dissecting the contribution of main-sequence (MS) and starburst (SB) galaxies.
For each galaxy population, we convolved the observed galaxy stellar mass (M$_{\star}$) function
with a grid of M$_{\star}$-independent Eddington ratio ($\lambda_{\rm EDD}$) distributions,
normalised via empirical black hole accretion rate (BHAR) to star formation rate (SFR) relations.
Our simple approach yields an excellent agreement with the observed XLF since z$\sim$3. We find
that the redshift evolution of the observed XLF can only be reproduced through an intrinsic flattening
of the $\lambda_{\rm EDD}$ distribution, and with a positive shift of the break $\lambda^{*}$,
consistent with an anti-hierarchical behavior. The AGN accretion history is predominantly made
by massive (10$^{10}<$M$_{\star}<$10$^{11}$ M$_{\odot}$) MS galaxies, while SB-driven BH accretion,
possibly associated with galaxy mergers, becomes dominant only in bright quasars, at $\log$(L$_{\rm
X}$/erg s$^{-1}$)$>$44.36 + 1.28$\cdot$(1+z). We infer that the probability of finding highly-accreting
($\lambda_{\rm EDD}>$ 10%) AGN significantly increases with redshift, from 0.4% (3.0%) at z=0.5
to 6.5% (15.3%) at z=3 for MS (SB) galaxies, implying a longer AGN duty cycle in the early Universe.
Our results strongly favor a M$_{\star}$-dependent ratio between BHAR and SFR, as BHAR/SFR $\propto$
M$_{\star}^{0.73[+0.22,-0.29]}$, supporting a non-linear BH buildup relative to the host. Finally,
this framework opens potential questions on super-Eddington BH accretion and different $\lambda_{\rm
EDD}$ prescriptions for understanding the cosmic BH mass assembly. 
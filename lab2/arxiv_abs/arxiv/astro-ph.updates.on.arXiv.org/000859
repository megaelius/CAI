It is well known that massive protoplanetary disc are gravitationally unstable beyond tens of AU
from their parent star. The eventual fate of the self-gravitating gas clumps born in the disc is currently
not understood, although the range of uncertainty is well known. If clumps migrate inward rapidly,
they are tidally disrupted, which may leave behind giant or terrestrial like planets. On the other
hand, if clumps migrate less rapidly, they tend to accrete gas, becoming proto brown dwarfs or low
mass companions to the parent star. Here we argue that radiative feedback of contracting clumps
(protoplanets) on their discs is an important effect that has been overlooked in previous calculations.
We show analytically that temperature in clump's vicinity may be high enough to support a quasi-static
atmosphere if the clump mass is below a critical value, $M_{\rm cr} \sim 6$ Jupiter masses ($M_J$).
This may arrest further gas accretion onto the clump and thus promote formation of planets rather
than low mass companions. We use numerical simulations to evaluate these analytical conclusions
by studying migration and accretion of gas clumps as a function of their initial mass, $M_i$. Simulations
neglecting the radiative preheating effect show that gas clumps with mass less than $\sim 2 M_J$
migrate inward rapidly; more massive clumps result in low mass companions. In contrast, simulations
that include radiative preheating from the clump show that clumps as massive as $8 M_J$ migrate inward
rapidly and end up tidally disrupted in the inner disc. We conclude that, with other parameters being
equal, previous simulations neglecting radiative feedback from self-gravitating clumps over-estimated
the population of brown dwarfs and low mass stellar companions and under-estimated the population
of planets. 
We infer the star formation rates in dark matter halos at different redshifts from the observed stellar
mass functions of galaxies at different redshifts and the luminosity function of local cluster
galaxies. By parametrising the star formation as a function that is explicitly dependent on halo
mass and redshift, a series of nested model families with increasing complexity are explored to
understand how the structure of this function is constrained by the different data sets. To match
the observed stellar mass functions at different redshifts, the star formation in the central galaxies
of halos with masses above $10^{12}\Msunh$ has to be boosted at high redshift beyond what is expected
from a simple scaling of the dynamical time. To reproduce the faint end of the cluster galaxy luminosity
function ($M_{z}-5\log_{10}(h) > -18$) and the low mass end of the local stellar mass function
simultaneously, there is a characteristic redshift $z_c \approx 2$ that defines a transition in
star formation efficiency (star formation rate divided by the mean baryon mass accretion rate)
in low mass halos ($<10^{11}\Msunh$). The star formation efficiency is about 1/10 at $z>z_c$
and is strongly quenched at lower $z$. This gives rises to a significant amount of old stellar population
in present-day dwarf galaxies below $10^{8}\Msunhh$ and steepened slopes of the high redshift
stellar mass functions and star formation rate functions, both consistent with latest observations.
We use our constrained models to make predictions for the star formation and assembly histories
of galaxies in halos of different masses, and for a number of properties of the galaxy population.

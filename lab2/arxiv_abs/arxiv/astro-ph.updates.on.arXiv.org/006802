We present an X-ray stacking analysis of $\sim$75,000 star-forming galaxies between $0.1<z<5.0$
using the Chandra COSMOS Legacy survey to study the X-ray emission of low-luminosity active galactic
nuclei (AGN) and its connection to host galaxy properties. The stacks at $z<0.9$ have luminosity
limits as low as $10^{40}-10^{41}$ erg s$^{-1}$, a regime in which X-ray binaries (XRBs) can dominate
the X-ray emission. Comparing the measured luminosities to established XRB scaling relations,
we find that the redshift evolution of the luminosity per star formation rate (SFR) of XRBs depends
sensitively on the assumed obscuration and may be weaker than previously found. The XRB scaling
relation based on stacks from the Chandra Deep Field South overestimates the XRB contribution to
the COSMOS high specific SFR (sSFR) stacks, possibly due to a bias affecting the CDF-S stacks because
of their small galaxy samples. After subtracting the estimated XRB contribution from the stacks,
we find that most stacks at $z>1.3$ exhibit a significant X-ray excess indicating nuclear emission.
The AGN emission is strongly correlated with stellar mass but does not exhibit an additional correlation
with SFR. The hardness ratios of the high-redshift stacks indicate that the AGN are substantially
obscured ($N_{\mathrm{H}}\sim10^{23}$ cm$^{-2}$). These obscured AGN are not identified by
IRAC color selection and have $L_X\sim10^{41}-10^{43}$ erg s$^{-1}$, consistent with accretion
at an Eddington rate of $\sim10^{-3}$ onto $10^7-10^8 M_{\odot}$ black holes. Combining our results
with other X-ray studies suggests that AGN obscuration depends on stellar mass and an additional
variable, possibly the Eddington rate. 
The detection of Earth-size exoplanets around low-mass stars -- such as Proxima Centauri b and the
TRAPPIST-1 system -- provide an exceptional chance to improve our understanding of the formation
of planets around M stars and brown dwarfs. We explore the formation of such planets with a population
synthesis code based on a planetesimal-driven model previously used to study the formation of the
Jovian satellites. Because the discs have low mass and the stars are cool, the formation is an inefficient
process that happens at low periods, generating compact planetary systems. Planets can be trapped
in resonances and we follow the evolution of the planets after the gas has dissipated and they undergo
orbit crossings and possible mergers. We find that planet formation in the planetesimal accretion
scenario is only possible around stars with masses $M_{\star} \ge 0.07 M_{sun}$ and discs of $M_{disc}
\ge 10^{-2}~M_{sun} $. Hence, in order to form planets ($M_p \ge 0.1 M_{\oplus}$) around low-mass
stars ($0.05 \le M_{\star} \le 0.25 M_{sun}$), relatively massive discs are required. Our results
show that one third of the synthetic planetary systems have at least one planet with $M_p \ge 1 M_{\oplus}$,
but we are not able to form planets larger than $5 M_{\oplus}$, showing that planets such as GJ 3512b
form with another, more efficient mechanism. We find that the large majority of the planets formed
have a large water content and most of our synthetic planetary systems have 1, 2 or 3 planets, but planets
with 4,5,6 and 7 planets are also common, confirming that compact planetary systems with many planets
should be a relatively common outcome of planet formation around small stars. Our results provide
information to guide current and future surveys and aid in the interpretation of TESS and PLATO data.

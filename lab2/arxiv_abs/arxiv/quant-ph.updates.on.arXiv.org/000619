We consider the problem of generating multipartite entangled states in a quantum network upon request.
We follow a top-down approach, where the required entanglement is initially present in the network
in form of network states shared between network devices, and then manipulated in such a way that
the desired target state is generated. This minimizes generation times, and allows for network
structures that are in principle independent of physical links. We present a modular and flexible
architecture, where a multi-layer network consists of devices of varying complexity, including
quantum network routers, switches and clients, that share certain resource states. We concentrate
on the generation of graph states among clients, which are resources for numerous distributed quantum
tasks. We assume minimal functionality for clients, i.e. they do not participate in the complex
and distributed generation process of the target state. We present architectures based on shared
multipartite entangled Greenberger-Horne-Zeilinger (GHZ) states of different size, and fully
connected decorated graph states respectively. We compare the features of these architectures
to an approach that is based on bipartite entanglement, and identify advantages of the multipartite
approach in terms of memory requirements and complexity of state manipulation. The architectures
can handle parallel requests, and are designed in such a way that the network state can be dynamically
extended if new clients or devices join the network. For generation or dynamical extension of the
network states, we propose a quantum network configuration protocol, where entanglement purification
is used to establish high-fidelity states. The latter also allows one to show that the entanglement
generated among clients is private, i.e. the network is secure. 
Solid state convection can take place in the rocky or icy mantles of planetary objects and these mantles
can be surrounded above or below or both by molten layers of similar composition. A flow toward the
interface can proceed through it by changing phase. This behaviour is modeled by a boundary condition
involving a phase change dimensionless number, $\Phi$, whose value controls whether the condition
is the classical non-penetrative one ($\Phi\rightarrow \infty$) or allows for a finite flow through
the boundary (small $\Phi$). We study Rayleigh-B\'enard convection in a plane layer subject to
this boundary condition at either or both its boundaries using linear and weakly non-linear analyses.
When both boundaries are phase change interfaces with equal values of $\Phi$, a non-deforming translation
mode is possible with a critical Rayleigh number equal to $24\Phi$. At small values of $\Phi$, this
mode competes with a weakly deforming mode having a slightly lower critical Rayleigh number and
a very long wavelength $\lambda_c\sim 8\sqrt{2}\pi/ 3\sqrt{\Phi}$. Both modes lead to very efficient
heat transfer, as expressed by the relationship between the Nusselt and Rayleigh numbers. When
only one boundary is subject to a phase change condition, the critical Rayleigh number is $\mbox{Ra}_c=153$
and the critical wavelength is $\lambda_c=5$. The Nusselt number increases about twice faster
with Rayleigh number than in the classical case with non-penetrative conditions and the average
temperature diverges from $1/2$ when the Rayleigh number is increased, toward larger values when
the bottom boundary is a phase change interface. 
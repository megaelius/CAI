Remote sensing observations of coronal holes show that heavy ions are hotter than protons and their
temperature is anisotropic. In-situ observations of fast solar wind streams provide direct evidence
for turbulent Alfv\'en wave spectrum, left-hand polarized ion-cyclotron waves, and He$^{++}$
-- proton drift in the solar wind plasma, which can produce temperature anisotropies by resonant
absorption and perpendicular heating of the ions. Furthermore, the solar wind is expected to be
inhomogeneous on decreasing scales approaching the Sun. We study the heating of solar wind ions
in inhomogeneous plasma with a 2.5D hybrid code. We include the expansion of the solar wind in an inhomogeneous
plasma background, combined with the effects of a turbulent wave spectrum of Alfv\'enic fluctuations
and initial ion-proton drifts. We study the influence of these effects on the perpendicular ion
heating and cooling and on the spectrum of the magnetic fluctuations in the inhomogeneous background
wind. We find that inhomogeneities in the plasma lead to enhanced heating compared to the homogenous
solar wind, and the generation of significant power of oblique waves in the solar wind plasma. The
cooling effect due to the expansion is not significant for super-Alfv\'enic drifts, and is diminished
further when we include an inhomogenous background density. We reproduce the ion temperature anisotropy
seen in observations and previous models, which is present regardless of the perpendicular cooling
due to solar wind expansion. We conclude that small scale inhomogeneities in the inner heliosphere
can significantly affect resonant wave ion heating. 
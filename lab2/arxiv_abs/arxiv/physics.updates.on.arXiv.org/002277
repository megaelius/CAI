We present a full-scale clinical prototype system for in vivo range verification of proton pencil-beams
using the prompt gamma-ray spectroscopy method. The detection system consists of eight LaBr3 scintillators
and a tungsten collimator, mounted on a rotating frame. Custom electronics and calibration algorithms
have been developed for the measurement of energy- and time-resolved gamma-ray spectra during
proton irradiation at a clinical dose rate. Using experimentally determined nuclear reaction
cross sections and a GPU-accelerated Monte Carlo simulation, a detailed model of the expected gamma-ray
emissions is created for each individual pencil-beam. The absolute range of the proton pencil-beams
is determined by minimizing the discrepancy between the measurement and this model, leaving the
absolute range of the beam and the elemental concentrations of the irradiated matter as free parameters.
The system was characterized in a clinical-like situation by irradiating different phantoms with
a scanning pencil-beam. A dose of 0.9 Gy was delivered to a 5x10x10 cm^3 target with a beam current
of 2 nA incident on the phantom. Different range shifters and materials were used to test the robustness
of the verification method and to calculate the accuracy of the detected range. The absolute proton
range was determined for each spot of the distal energy layer with a mean statistical precision of
1.1 mm at a 95% confidence level and a mean systematic deviation of 0.5 mm, when aggregating pencil-beam
spots within a cylindrical region of 10 mm radius and 10 mm depth. Small range errors that we introduced
were successfully detected and even large differences in the elemental composition do not affect
the range verification accuracy. These results show that our system is suitable for range verification
during patient treatments in our upcoming clinical study. 
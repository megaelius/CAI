We consider the design and modeling of metasurfaces that couple energy from guided waves to propagating
wavefronts. This is a first step towards a comprehensive, multiscale modeling platform for metasurface
antennas-large arrays of metamaterial elements embedded in a waveguide structure that radiates
into free-space--in which the detailed electromagnetic responses of metamaterial elements are
replaced by polarizable dipoles. We present two methods to extract the effective polarizability
of a metamaterial element embedded in a one- or two-dimensional waveguide. The first method invokes
surface equivalence principles, averaging over the effective surface currents and charges within
an element to obtain the effective dipole moments; the second method is based on computing the coefficients
of the scattered waves within the waveguide, from which the effective polarizability can be inferred.
We demonstrate these methods on several variants of waveguide-fed metasurface elements, finding
excellent agreement between the two, as well as with analytical expressions derived for irises
with simpler geometries. Extending the polarizability extraction technique to higher order multipoles,
we confirm the validity of the dipole approximation for common metamaterial elements. With the
effective polarizabilities of the metamaterial elements accurately determined, the radiated
fields generated by a metasurface antenna (inside and outside the antenna) can be found self-consistently
by including the interactions between polarizable dipoles. The dipole description provides an
alternative language and computational framework for engineering metasurface antennas, holograms,
lenses, beam-forming arrays, and other electrically large, waveguide-fed metasurface structures.

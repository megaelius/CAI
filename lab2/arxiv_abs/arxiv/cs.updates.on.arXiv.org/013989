Objective: Deriving disease subtypes from electronic health records (EHRs) can guide next-generation
personalized medicine. However, challenges in summarizing and representing patient data prevent
widespread practice of scalable EHR-based stratification analysis. Here, we present a novel unsupervised
framework based on deep learning to process heterogeneous EHRs and derive patient representations
that can efficiently and effectively enable patient stratification at scale. Materials and methods:
We considered EHRs of $1,608,741$ patients from a diverse hospital cohort comprising of a total
of $57,464$ clinical concepts. We introduce a representation learning model based on word embeddings,
convolutional neural networks and autoencoders (i.e., "ConvAE") to transform patient trajectories
into low-dimensional latent vectors. We evaluated these representations as broadly enabling
patient stratification by applying hierarchical clustering to different multi-disease and disease-specific
patient cohorts. Results: ConvAE significantly outperformed several common baselines in a clustering
task to identify patients with different complex conditions, with $2.61$ entropy and $0.31$ purity
average scores. When applied to stratify patients within a certain condition, ConvAE led to various
clinically relevant subtypes for different disorders, including type 2 diabetes, Parkinson's
disease and Alzheimer's disease, largely related to comorbidities, disease progression, and
symptom severity. Conclusions: Patient representations derived from modeling EHRs with ConvAE
can help develop personalized medicine therapeutic strategies and better understand varying
etiologies in heterogeneous sub-populations. 
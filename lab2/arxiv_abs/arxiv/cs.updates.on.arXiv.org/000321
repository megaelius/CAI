We obtain an algorithmic meta-theorem for the following optimization problem. Let \phi\ be a Counting
Monadic Second Order Logic (CMSO) formula and t be an integer. For a given graph G, the task is to maximize
|X| subject to the following: there is a set of vertices F of G, containing X, such that the subgraph
G[F] induced by F is of treewidth at most t, and structure (G[F],X) models \phi. Some special cases
of this optimization problem are the following generic examples. Each of these cases contains various
problems as a special subcase: 1) "Maximum induced subgraph with at most l copies of cycles of length
0 modulo m", where for fixed nonnegative integers m and l, the task is to find a maximum induced subgraph
of a given graph with at most l vertex-disjoint cycles of length 0 modulo m. 2) "Minimum \Gamma-deletion",
where for a fixed finite set of graphs \Gamma\ containing a planar graph, the task is to find a maximum
induced subgraph of a given graph containing no graph from \Gamma\ as a minor. 3) "Independent \Pi-packing",
where for a fixed finite set of connected graphs \Pi, the task is to find an induced subgraph G[F] of
a given graph G with the maximum number of connected components, such that each connected component
of G[F] is isomorphic to some graph from \Pi. We give an algorithm solving the optimization problem
on an n-vertex graph G in time O(#pmc n^{t+4} f(t,\phi)), where #pmc is the number of all potential
maximal cliques in G and f is a function depending of t and \phi\ only. We also show how a similar running
time can be obtained for the weighted version of the problem. Pipelined with known bounds on the number
of potential maximal cliques, we deduce that our optimization problem can be solved in time O(1.7347^n)
for arbitrary graphs, and in polynomial time for graph classes with polynomial number of minimal
separators. 
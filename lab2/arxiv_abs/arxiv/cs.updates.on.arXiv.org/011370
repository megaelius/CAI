Active researches are currently being performed to incorporate the wealth of scientific knowledge
into data-driven approaches (e.g., neural networks) in order to improve the latter's effectiveness.
In this study, the Theory-guided Neural Network (TgNN) is proposed for deep learning of subsurface
flow. In the TgNN, as supervised learning, the neural network is trained with available observations
or simulation data while being simultaneously guided by theory (e.g., governing equations, other
physical constraints, engineering controls, and expert knowledge) of the underlying problem.
The TgNN can achieve higher accuracy than the ordinary Artificial Neural Network (ANN) because
the former provides physically feasible predictions and can be more readily generalized beyond
the regimes covered with the training data. Furthermore, the TgNN model is proposed for subsurface
flow with heterogeneous model parameters. Several numerical cases of two-dimensional transient
saturated flow are introduced to test the performance of the TgNN. In the learning process, the loss
function contains data mismatch, as well as PDE constraint, engineering control, and expert knowledge.
After obtaining the parameters of the neural network by minimizing the loss function, a TgNN model
is built that not only fits the data, but also adheres to physical/engineering constraints. Predicting
the future response can be easily realized by the TgNN model. In addition, the TgNN model is tested
in more complicated scenarios, such as prediction with changed boundary conditions, learning
from noisy data or outliers, transfer learning, and engineering controls. Numerical results demonstrate
that the TgNN model achieves much better predictability, reliability, and generalizability than
ANN models due to the physical/engineering constraints in the former. 
This paper presents a new algorithm for the lossy compression of scalar data defined on 2D or 3D regular
grids, with topological control. Certain techniques allow users to control the pointwise error
induced by the compression. However, in many scenarios it is desirable to control in a similar way
the preservation of higher-level notions, such as topological features , in order to provide guarantees
on the outcome of post-hoc data analyses. This paper presents the first compression technique for
scalar data which supports a strictly controlled loss of topological features. It provides users
with specific guarantees both on the preservation of the important features and on the size of the
smaller features destroyed during compression. In particular, we present a simple compression
strategy based on a topologically adaptive quantization of the range. Our algorithm provides strong
guarantees on the bottleneck distance between persistence diagrams of the input and decompressed
data, specifically those associated with extrema. A simple extension of our strategy additionally
enables a control on the pointwise error. We also show how to combine our approach with state-of-the-art
compressors, to further improve the geometrical reconstruction. Extensive experiments, for
comparable compression rates, demonstrate the superiority of our algorithm in terms of the preservation
of topological features. We show the utility of our approach by illustrating the compatibility
between the output of post-hoc topological data analysis pipelines, executed on the input and decompressed
data, for simulated or acquired data sets. We also provide a lightweight VTK-based C++ implementation
of our approach for reproduction purposes. 
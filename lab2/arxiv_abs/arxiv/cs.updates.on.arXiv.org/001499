Since the development of capsule endoscopcy technology, substantial progress were made in converting
passive capsule endoscopes to robotic active capsule endoscopes which can be controlled by the
doctor. However, robotic capsule endoscopy still has some challenges. In particular, the use of
such devices to generate a precise and globally consistent three-dimensional (3D) map of the entire
inner organ remains an unsolved problem. Such global 3D maps of inner organs would help doctors to
detect the location and size of diseased areas more accurately, precisely, and intuitively, thus
permitting more accurate and intuitive diagnoses. The proposed 3D reconstruction system is built
in a modular fashion including preprocessing, frame stitching, and shading-based 3D reconstruction
modules. We propose an efficient scheme to automatically select the key frames out of the huge quantity
of raw endoscopic images. Together with a bundle fusion approach that aligns all the selected key
frames jointly in a globally consistent way, a significant improvement of the mosaic and 3D map accuracy
was reached. To the best of our knowledge, this framework is the first complete pipeline for an endoscopic
capsule robot based 3D map reconstruction containing all of the necessary steps for a reliable and
accurate endoscopic 3D map. For the qualitative evaluations, a real pig stomach is employed. Moreover,
for the first time in literature, a detailed and comprehensive quantitative analysis of each proposed
pipeline modules is performed using a non-rigid esophagus gastro duodenoscopy simulator, four
different endoscopic cameras, a magnetically activated soft capsule robot (MASCE), a sub-millimeter
precise optical motion tracker and a fine-scale 3D optical scanner. 
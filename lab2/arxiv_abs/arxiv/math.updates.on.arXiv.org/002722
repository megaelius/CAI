We extend the category of (super)manifolds and their smooth mappings by introducing a notion of
microformal or "thick" morphisms. They are formal canonical relations of a special form, constructed
with the help of formal power expansions in cotangent directions. The result is a formal category
so that its composition law is also specified by a formal power series. A microformal morphism acts
on functions by an operation of pullback, which is in general a nonlinear transformation. More precisely,
it is a formal mapping of formal manifolds of even functions (bosonic fields), which has the property
that its derivative for every function is a ring homomorphism. This suggests an abstract notion
of a "nonlinear algebra homomorphism" and the corresponding extension of the classical "algebraic-functional"
duality. There is a parallel fermionic version. The obtained formalism provides a general construction
of $L_{\infty}$-morphisms for functions on homotopy Poisson ($P_{\infty}$-) or homotopy Schouten
($S_{\infty}$-) manifolds as pullbacks by Poisson microformal morphisms. We also show that the
notion of the adjoint can be generalized to nonlinear operators as a microformal morphism. By applying
this to $L_{\infty}$-algebroids, we show that an $L_{\infty}$-morphism of $L_{\infty}$-algebroids
induces an $L_{\infty}$-morphism of the "homotopy Lie--Poisson" brackets for functions on the
dual vector bundles. We apply this construction to higher Koszul brackets on differential forms
and to triangular $L_{\infty}$-bialgebroids. We also develop a quantum version (for the bosonic
case), whose relation with the classical version is like that of the Schr\"odinger equation with
the Hamilton--Jacobi equation. We show that the nonlinear pullbacks by microformal morphisms
are the limits at $\hbar\to 0$ of certain "quantum pullbacks", which are defined as special form
Fourier integral operators. 
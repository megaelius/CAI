The dynamics of an ideal fluid or plasma is constrained by topological invariants such as the circulation
of (canonical) momentum or, equivalently, the flux of the vorticity or magnetic fields. In the Hamiltonian
formalism, topological invariants restrict the orbits to submanifolds of the phase space. While
the coadjoint orbits have a natural symplectic structure, the global geometry of the degenerate
(constrained) Poisson manifold can be very complex. Some invariants are represented by the center
of the Poisson algebra (i.e., the Casimir elements such as the helicities), and then, the global
structure of phase space is delineated by Casimir leaves. However, a general constraint is not necessarily
integrable, which precludes the existence of an appropriate Casimir element; the circulation
is an example of such an invariant. In this work, we formulate a systematic method to embed a Hamiltonian
system in an extended phase space; we introduce mock fields and extend the Poisson algebra so that
the mock fields are Lie-dragged by the flow vector. A mock field defines a new Casimir element, a cross
helicity, which represents topological constraints including the circulation. Unearthing a
Casimir element brings about immense advantage in the study of dynamics and equilibria -- the so-called
energy-Casimir method becomes ready available. Yet, a mock field does not a priori have a physical
meaning. Here we proffer an interpretation of a Casimir element obtained, e.g., by such a construction
as an adiabatic invariant associated with a hidden "microscopic" angle variable, and in this way
give the mock field a physical meaning. We proceed further and consider a perturbation of the Hamiltonian
by a canonical pair, composed of the Casimir element and the angle, that causes the topological constraint
to be unfrozen. The theory is applied to the tearing modes of MHD. 
This article deals with the problem of finding the best topology, pipe diameter choices, and operation
parameters for district heating networks. We introduce an alternative adjoint-based numerical
optimization strategy that aims at enabling large-scale nonlinear thermal network optimization.
This allows the optimal design tool to start from a bottom-up transport-based district heating
network model. We introduce a proof-of-concept design formulation that optimizes the network
for minimal investment cost and pumping power, while keeping the heat supplied to the consumers
within a thermal comfort range of 5 %. Several challenges in applying the adjoint optimization strategy
to district heating network design are overcome in this paper. First, we avoid a strong computational
cost scaling with the network size by introducing a constraint aggregation strategy. Secondly,
we present a numerical continuation strategy that gradually forces the continuous optimization
method towards discrete design variable choices. As such, network topology and discrete pipe size
choices are determined simultaneously. Finally, we employ the algorithm for the design of a fictitious
but realistically-sized district heating network with 160 consumers. Starting from a uniform
distribution of 15 cm wide piping throughout the network, the novel algorithm finds a network lay-out
that reduces piping investment by 23 % and pump-related costs by a factor of 14 in less than an hour
on a standard laptop. Moreover, the importance of embedding a non-linear transport model is clear
from a temperature-induced variation in the consumer flow rates of 72 %. 
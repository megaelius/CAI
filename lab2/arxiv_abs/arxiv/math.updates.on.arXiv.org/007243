Continued great efforts have been dedicated towards high-quality trajectory generation based
on optimization methods, however, most of them do not suitably and effectively consider the situation
with moving obstacles; and more particularly, the future position of these moving obstacles in
the presence of uncertainty within some possible prescribed prediction horizon. To cater to this
rather major shortcoming, this work shows how a variational Bayesian Gaussian mixture model (vBGMM)
framework can be employed to predict the future trajectory of moving obstacles; and then with this
methodology, a trajectory generation framework is proposed which will efficiently and effectively
address trajectory generation in the presence of moving obstacles, and also incorporating presence
of uncertainty within a prediction horizon. In this work, the full predictive conditional probability
density function (PDF) with mean and covariance is obtained, and thus a future trajectory with uncertainty
is formulated as a collision region represented by a confidence ellipsoid. To avoid the collision
region, chance constraints are imposed to restrict the collision probability, and subsequently
a nonlinear MPC problem is constructed with these chance constraints. It is shown that the proposed
approach is able to predict the future position of the moving obstacles effectively; and thus based
on the environmental information of the probabilistic prediction, it is also shown that the timing
of collision avoidance can be earlier than the method without prediction. The tracking error and
distance to obstacles of the trajectory with prediction are smaller compared with the method without
prediction. 
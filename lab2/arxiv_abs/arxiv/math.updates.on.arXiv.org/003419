The single server queue with multiple customer types and semi-Markovian service times, sometimes
referred to as the $M/SM/1$ queue, has been well-studied since its introduction by Neuts in 1966.
In this paper, we apply an extension of this model, with batch arrivals and exceptional first service,
to road traffic situations involving multiple streams of conflicting traffic. In particular,
we use it in the context of gap acceptance models where low-priority traffic needs to cross (or, depending
on the application, merge with) another traffic flow of higher priority. Traditionally, gap acceptance
models are based on the $M/G/1$ queue with exceptional first service, in this application area commonly
referred to as the $M/G2/1$ queue. In an earlier study, we showed how the $M^X/SM/1$ queue with exceptional
first service can be applied in this context to extend the model with driver impatience and more realistic
merging behaviour. In this paper, we show how this same queueing system can be used to model a Markov
modulated Poisson arrival process of the high-priority traffic stream. Due to its flexibility,
this arrival process is very relevant in this application, particularly because it allows the modelling
of platoon forming of vehicles. The correlated inter-arrival times of these high priority vehicles
cause the merging times of two subsequent low priority vehicles to become dependent as well (as they
correspond with the service times in the underlying queueing model). We derive the waiting time
and sojourn time distributions of an arbitrary customer, showing that these depend on the position
of the customer inside the batch, as well as on the type of the first customer in the batch. 
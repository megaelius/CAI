The Born--Oppenheimer approximation is the standard tool for the study of molecular systems. It
is founded on the observation that the energy scale of the electron dynamics in a molecule is larger
than that of the nuclei. A very similar physical picture can be used to describe QCD states containing
heavy quarks as well as light-quarks or gluonic excitations. In this work, we derive the Born--Oppenheimer
approximation for QED molecular systems in an effective field theory framework by sequentially
integrating out degrees of freedom living at energies above the typical energy scale where the dynamics
of the heavy degrees of freedom occurs. In particular, we compute the matching coefficients of the
effective field theory for the case of the $H^+_2$ diatomic molecule that are relevant to compute
its spectrum up to ${\cal O}(m\alpha^5)$. Ultrasoft photon loops contribute at this order, being
ultimately responsible for the molecular Lamb shift. In the effective field theory the scaling
of all the operators is homogeneous, which facilitates the determination of all the relevant contributions,
an observation that may become useful for high-precision calculations. Using the above case as
a guidance, we construct under some conditions an effective field theory for QCD states formed by
a color-octet heavy quark-antiquark pair bound with a color-octet light-quark pair or excited
gluonic state, highlighting the similarities and differences between the QED and QCD systems.
Assuming that the multipole expansion is applicable, we construct the heavy-quark potential up
to next-to-leading order in the multipole expansion in terms of nonperturbative matching coefficients
to be obtained from lattice QCD. 
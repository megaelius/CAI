The dispersive analysis of the decay $\eta\to3\pi$ is reviewed and thoroughly updated with the
aim of determining the quark mass ratio ~$Q^2=(m_s^2-m_{ud}^2)/(m_d^2-m_u^2)$. With the number
of subtractions we are using, the effects generated by the final state interaction are dominated
by low energy $\pi\pi$ scattering. Since the corresponding phase shifts are now accurately known,
causality and unitarity determine the decay amplitude within small uncertainties -- except for
the values of the subtraction constants. Our determination of these constants relies on the Dalitz
plot distribution of the charged channel, which is now measured with good accuracy. The theoretical
constraints that follow from the fact that the particles involved in the transition represent Nambu-Goldstone
bosons of a hidden approximate symmetry play an equally important role. The ensuing predictions
for the Dalitz plot distribution of the neutral channel and for the branching ratio $\Gamma_{\eta\to3\pi^0}/
\Gamma_{\eta\to\pi^+\pi^-\pi^0}$ are in very good agreement with experiment. Relying on a known
low-energy theorem that relates the meson masses to the masses of the three lightest quarks, our
analysis leads to $Q=22.1(7)$, where the error covers all of the uncertainties encountered in the
course of the calculation: experimental uncertainties in decay rates and Dalitz plot distributions,
noise in the input used for the phase shifts, as well as theoretical uncertainties in the constraints
imposed by chiral symmetry and in the evaluation of isospin breaking effects. Our result indicates
that the current algebra formulae for the meson masses only receive small corrections from higher
orders of the chiral expansion, but not all of the recent lattice results are consistent with this
conclusion. 